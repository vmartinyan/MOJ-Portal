jQuery(document).ready(function(e){function t(e){var t=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return t.test(e)}function n(e,t){"valid"==t?e.css("border-color","#ddd"):e.css("border-color","red")}function a(t){e(".google-fontos").remove(),"none"!=t&&"undefined"!=typeof t&&(e("head").append('<link class="google-fontos" rel="stylesheet" href="https://fonts.googleapis.com/css?family='+t+':100,200,300,400,500,600,700,800,900&subset=latin,latin-ext,cyrillic,cyrillic-ext,greek-ext,greek,vietnamese" />'),e(".cf7-style.preview-zone p").css("font-family","'"+t+"', sans-serif"),e(".preview-form-container .wpcf7").css("font-family","'"+t+"', sans-serif"))}function i(t){e(window).scroll(function(){if(e(window).width()>1600){var n=(t.find(".panel-header").offset(),e("#cf7_style_meta_box_style_customizer").offset()),a=e(window).scrollTop()-n.top;a>0&&t.find(".panel-header").css("top",a),0>=a&&t.find(".panel-header").css("top",0)}e(window).scrollTop()>700?e(".fixed-save-style").show():e(".fixed-save-style").hide()}).trigger("scroll")}function s(){e("input[type='number']").on("change",function(){var t=e(this).val(),n=e(this).index(),a=e(this).parent().find("input[type=number]");switch(n){case 2:a.val(t);break;case 5:a.eq(3).val(t)}})}function l(t){var n=e('input[name="cf7styleallvalues"]');if(n.length>0){var a=e('input[name="cf7styleallvalues"]').val(),i=e.parseJSON(a.replace(/'/g,'"'));e.each(i,function(n,a){if(n.indexOf("unit")<0&&("hover"==t&&n.indexOf("hover")>0||"hover"!=t&&n.indexOf("hover")<0)){var s=n.split("_"),l=s[0],o=i[n+"_unit"];"submit"==s[0]&&(l="input[type='submit']"),"form"==s[0]&&(l=".wpcf7"),("wpcf7-not-valid-tip"==s[0]||"wpcf7-validation-errors"==s[0]||"wpcf7-mail-sent-ok"==s[0])&&(l="."+s[0]),o="undefined"==typeof o||""==a?"":o;var r=a+o;"background-image"==s[1]&&(r="url("+a+")"),l="radio"==l?'input[type="radio"]':"checkbox"==l?'input[type="checkbox"]':l,e(".preview-form-container "+l).css(s[1],r)}})}}function o(t){t.on("click",function(){e(".cf7style_body_select_all input").prop("checked",e(this).is(":checked")?!0:!1)})}function r(t,n,a,i){var s=t.find(".active"),l=s.index()+1,o=t.find("li"),r=t.find("ul"),c=t.find(".narrow"),d=t.find(".narrow.left"),u=t.find(".narrow.right"),p=t.find("li").length;u.addClass("visible"),r.css("width",p*n),0==i&&t.mouseenter(function(){t.find(".visible").stop().show()}).mouseleave(function(){t.find(".visible").stop().hide()}),c.on("click",function(t){t.stopPropagation(),t.preventDefault();var i=e(this).attr("data-direction");"left"==i&&1!==l&&(r.stop(!0,!0).animate({marginLeft:"+="+n+"px"},a),l--),"right"==i&&l!==p&&(r.stop(!0,!0).animate({marginLeft:-(n*l)+"px"},a),l++),1==l&&(d.hide().removeClass("visible"),u.show().addClass("visible")),l==p&&u.hide().removeClass("visible"),p>l&&u.show().addClass("visible"),l>1&&d.show().addClass("visible"),o.removeClass("active").eq(l-1).addClass("active")}),r.css({"margin-left":"-"+(l-1)*n+"px"})}function c(t){r(t,202,500,!0),t.find("li").on("click",function(){e(this).hasClass("current-saved")||(t.find("li").removeClass("current-saved"),e(this).addClass("current-saved"),t.find(".overlay em").html("Not Active"),e(this).find(".overlay em").html("Active"),e(".cf7style_template").removeAttr("checked"),e(this).find(".cf7style_template").attr("checked","checked"))})}function d(t){var n="",a=e.parseJSON(e('input[name="cf7styleallvalues"]').val().replace(/'/g,'"'));e.each(t.serializeObject(),function(e,t){0==a.length&&(a={}),a[e.replace(/cf7stylecustom\[/g,"").replace(/]/g,"")]=t}),n=JSON.stringify(a),n=n.replace(/cf7stylecustom\[/g,"").replace(/]/g,""),e('input[name="cf7styleallvalues"]').val(n.replace(/"/g,"'")),e('input[name="cf7styleallvalues"]').attr("value",n.replace(/"/g,"'"))}function u(){l(),e("#form-tag a.button").on("click",function(t){t.preventDefault();var n=e(this),a=e("."+n.attr("data-property")+"-panel"),i=0;0==e(".modified-style-here").length?(n.hasClass("button-primary")||(e(".panel").stop(!0,!0).animate({opacity:0},300,function(){0===i&&(i++,e(".panel").addClass("hidden"),e(".panel").html(""),a.css("opacity","0"),a.removeClass("hidden"),e.ajax({url:ajaxurl,method:"POST",data:{action:"cf7_style_load_property",property:n.attr("data-property")},beforeSend:function(){n.parent().find("a").prop("disabled","true"),e(".panel-options .loading").removeClass("hidden")},success:function(t){n.parent().find("a").prop("disabled","false"),i=0,a.html(t),e(".panel-options .loading").addClass("hidden");var l=e('input[name="cf7styleallvalues"]').val(),o=e.parseJSON(l.replace(/'/g,'"'));a.find('[name^="cf7stylecustom"]').each(function(){e(this).attr("id")in o&&""!=o[e(this).attr("id")]&&e(this).val(o[e(this).attr("id")])}),a.find(".cf7-style-color-field").wpColorPicker(A),s(),v(),a.stop(!0,!0).animate({opacity:1},300)}}))}),e(".element-selector input:eq(0)").prop("checked",!0)),e("#form-tag a.button").removeClass("button-primary"),n.addClass("button-primary"),e('input[name="cf7styleactivepane"]').val(n.attr("data-property"))):e(".panel-options .decision").removeClass("hidden")}),e(".panel-options .cancel-btn").on("click",function(t){t.preventDefault(),e(".panel-options .decision").addClass("hidden")}),e(".element-selector input").on("change",function(){e(".element-selector input").prop("checked",!1),e(this).prop("checked",!0),"hover"==e(this).val()?(e(".panel:visible li").addClass("hidden"),e(".panel:visible li.hover-element").removeClass("hidden"),l("hover")):(e(".panel:visible li.hover-element").addClass("hidden"),e(".panel:visible li").not(".hover-element").removeClass("hidden"),l())}),e("#form-preview").on("change",function(){e(".preview-form-container").addClass("hidden"),e(".preview-form-container").eq(e(this).val()).removeClass("hidden")});var t=0;e(document).on("change",'[name^="cf7stylecustom"]',function(){0==t&&(t++,e(this).parents(".panel").addClass("modified-style-here")),d(e(this).parents(".panel").find('[name^="cf7stylecustom"]')),"hover"==e('input[name="element-type"]:checked').val()?l("hover"):l()}),e(document).on("keyup",'[name^="cf7stylecustom"]',function(){d(e(this).parents(".panel").find('[name^="cf7stylecustom"]')),"hover"==e('input[name="element-type"]:checked').val()?l("hover"):l()})}function p(e){e.remove()}function f(e){e.on("click",function(e){e.preventDefault()})}function h(){e('.wpcf7 input[aria-required="true"]').each(function(){e('<span role="alert" class="wpcf7-not-valid-tip">Required field message example.</span>').insertAfter(e(this))}),e(".wpcf7").each(function(){e('<div class="wpcf7-response-output wpcf7-display-none wpcf7-validation-errors" style="display: block;" role="alert">Error message example.</div>').appendTo(e(this)),e('<div class="wpcf7-response-output wpcf7-display-none wpcf7-mail-sent-ok" style="display: block;" role="alert">Thank you message example.</div>').appendTo(e(this))})}function v(){var t=e(".cf7-style-upload-field");t.addClass("hidden"),t.each(function(){var t=e(this);e('<span class="image-info-box"></span>').insertAfter(t),""!=t.val()&&t.parent().find(".image-info-box").text(t.val().filename("yes"))}),e(".upload-btn").length<=0&&(e("<a href='javascript: void(0);' class='remove-btn button'>Remove</a>").insertAfter(t),e("<a href='javascript: void(0);' class='upload-btn button'>Upload</a>").insertAfter(t)),e(".upload-btn").on("click",function(){var t=e(this),n=t.parent().find(".cf7-style-upload-field");tb_show("New Banner","media-upload.php?type=image&TB_iframe=1"),window.send_to_editor=function(a){n.val(e(a).attr("src")),n.trigger("change"),t.parent().find(".image-info-box").text(e(a).attr("src").filename("yes")),tb_remove()}}),e(".remove-btn").on("click",function(){var t=e(this),n=t.parent().find(".cf7-style-upload-field");n.val(" "),n.attr("value"," "),n.trigger("change"),t.parent().find(".image-info-box").text("")})}function m(){if(e("#cf7_style_manual_style").length>0){CodeMirror.fromTextArea(document.getElementById("cf7_style_manual_style"),{lineNumbers:!0,theme:"default",mode:"text/css"})}}var F=e(".cf7style-name"),y=e(".cf7style-email"),g=e(".cf7style-message"),b=e(".cf7style-status-submit");b.on("click",function(a){if(a.preventDefault(),e(".cf7style-input").each(function(t,a){""==e(this).val()?n(e(this),"error"):n(e(this),"valid")}),""!==F.val()&&""!==y.val())if(t(y.val())){n(y,"valid");var i=e("<div />");e(".cf7style-status-table").each(function(t,n){var a=e("<table />");a.html(e(this).html()),i.append(a)}),e.ajax({url:ajaxurl,method:"POST",data:{action:"cf7_style_send_status_report",name:F.val(),email:y.val(),message:g.val(),report:i.html()},beforeSend:function(){b.text("Sending...")},success:function(t){"success"==e.trim(t)?b.text("Report sent").removeClass("cf7style-status-submit").attr("disabled","disabled"):b.text("Something went wrong!").removeClass("cf7style-status-submit").attr("disabled","disabled")}})}else n(y,"error");else console.log("error 1")}),e(".cf7style-status-info").on("click",function(t){t.preventDefault(),e(".cf7style-status-table").toggle()}),String.prototype.filename=function(e){var t=this.replace(/\\/g,"/");return t=t.substring(t.lastIndexOf("/")+1),e?t.replace(/[?#].+$/,""):t.split(".")[0]},e.fn.serializeObject=function(){var t={},n=this.serializeArray();return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},e(".cf7style-no-forms-added").length>0?e(".generate-preview-button, .generate-preview-option").show():e(".generate-button-hidden").show(),e(".generate-preview-button").on("click",function(t){t.preventDefault(),e(".cf7style-no-forms-added").hide();var n=e(this).attr("data-attr-id"),a=e(this).attr("data-attr-title");e(this).prop("disabled",!0),e(this).parents("tr").find("input").prop("checked",!0);var i=e("<p />");e(".preview-form-tag").prepend(i),e.ajax({url:ajaxurl,method:"POST",data:{action:"cf7_style_generate_preview_dashboard",form_id:n,form_title:a},beforeSend:function(){i.text("Loading..."),e(".multiple-form-generated-preview").hide()},success:function(t){t&&(i.remove(),e(".preview-form-tag").append(t),e(".multiple-form-generated-preview").eq(e(".multiple-form-generated-preview").length-1).show(),l(),h())}})});var w=e(".generate-preview"),x=e(".post-type-cf7_style "),_=e("#select_all"),C=e('select[name="cf7_style_font_selector"]'),D=e(".cf7-style-slider-wrap"),k=e(".preview-form-container"),A={change:function(t,n){d(e(this).parents(".panel").find('[name^="cf7stylecustom"]')),"hover"==e('input[name="element-type"]:checked').val()?l("hover"):l()}};if(e(".cf7-style-color-field").wpColorPicker(A),w.length>0&&i(w),x.length>0){m(),v(),s(),h();var k=e(".preview-form-container").not(".hidden");k.find("label").length<1&&e('.button[data-property="label"]').hide(),k.find("p").length<1&&e('.button[data-property="p"]').hide(),k.find("fieldset").length<1&&e('.button[data-property="fieldset"]').hide(),k.find("select").length<1&&e('.button[data-property="select"]').hide(),k.find('input[type="checkbox"]').length<1&&e('.button[data-property="checkbox"]').hide(),k.find('input[type="radio"]').length<1&&e('.button[data-property="radio"]').hide(),o(_),a(C.val()),C.on("change",function(){a(e(this).val())}),u(),p(k.find('input[type="hidden"]')),f(k.find('input[type="submit"]'))}D.length>0&&c(D),e(".close-cf7-panel").on("click",function(t){t.preventDefault(),e.ajax({url:ajaxurl,method:"POST",data:{action:"cf7_style_remove_welcome_box"},success:function(t){e(".welcome-container").fadeOut("slow")}})})});